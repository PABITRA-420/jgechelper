{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///F:/JGECHelper/src/lib/firebase.ts"],"sourcesContent":["\nimport { initializeApp, getApps, getApp } from \"firebase/app\";\nimport { getAuth } from \"firebase/auth\";\nimport { getFirestore } from \"firebase/firestore\";\nimport { getStorage } from \"firebase/storage\";\n\nconst firebaseConfig = {\n    apiKey: process.env.NEXT_PUBLIC_FIREBASE_API_KEY,\n    authDomain: process.env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN,\n    projectId: process.env.NEXT_PUBLIC_FIREBASE_PROJECT_ID,\n    storageBucket: process.env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET,\n    messagingSenderId: process.env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID,\n    appId: process.env.NEXT_PUBLIC_FIREBASE_APP_ID,\n};\n\n// Initialize Firebase\nconst app = !getApps().length ? initializeApp(firebaseConfig) : getApp();\n\nexport const auth = getAuth(app);\nexport const db = getFirestore(app);\nexport const storage = getStorage(app);\n"],"names":[],"mappings":";;;;;;;;AAOY;AANZ;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;;;;;AAEA,MAAM,iBAAiB;IACnB,MAAM;IACN,UAAU;IACV,SAAS;IACT,aAAa;IACb,iBAAiB;IACjB,KAAK;AACT;AAEA,sBAAsB;AACtB,MAAM,MAAM,CAAC,IAAA,8KAAO,IAAG,MAAM,GAAG,IAAA,oLAAa,EAAC,kBAAkB,IAAA,6KAAM;AAE/D,MAAM,OAAO,IAAA,wKAAO,EAAC;AACrB,MAAM,KAAK,IAAA,kLAAY,EAAC;AACxB,MAAM,UAAU,IAAA,8KAAU,EAAC"}},
    {"offset": {"line": 45, "column": 0}, "map": {"version":3,"sources":["file:///F:/JGECHelper/src/context/AuthContext.tsx"],"sourcesContent":["\"use client\";\n\nimport { createContext, useContext, useEffect, useState } from \"react\";\nimport {\n    onAuthStateChanged,\n    signInWithPopup,\n    GoogleAuthProvider,\n    signOut,\n    User,\n    signInWithEmailAndPassword,\n    createUserWithEmailAndPassword,\n    updateProfile,\n    sendPasswordResetEmail\n} from \"firebase/auth\";\nimport { auth, db } from \"@/lib/firebase\";\nimport { doc, setDoc, getDoc, serverTimestamp } from \"firebase/firestore\";\nimport { useRouter } from \"next/navigation\";\n\n// CONFIG: Admin Allowlist (Only used for FIRST login to assign initial role)\n// After the role is saved to Firestore, this list is ignored for that user.\nconst ADMIN_EMAILS = [\"sarkarpabitra1510@gmail.com\"];\n\n// Role type definitions\ntype UserRole = \"admin\" | \"user\" | null;\n\ninterface AuthContextType {\n    user: User | null;\n    role: UserRole;\n    loading: boolean;\n    signInWithGoogle: () => Promise<void>;\n    signInWithEmail: (email: string, pass: string) => Promise<void>;\n    registerWithEmail: (name: string, email: string, pass: string) => Promise<void>;\n    resetPassword: (email: string) => Promise<void>;\n    logout: () => Promise<void>;\n}\n\nconst AuthContext = createContext<AuthContextType>({} as AuthContextType);\n\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\n    const [user, setUser] = useState<User | null>(null);\n    const [role, setRole] = useState<UserRole>(null);\n    const [loading, setLoading] = useState(true);\n    const router = useRouter();\n\n    useEffect(() => {\n        const unsubscribe = onAuthStateChanged(auth, async (currentUser) => {\n            setLoading(true);\n\n            if (currentUser) {\n                setUser(currentUser);\n\n                try {\n                    const userRef = doc(db, \"users\", currentUser.uid);\n                    const userSnap = await getDoc(userRef);\n\n                    if (userSnap.exists()) {\n                        const userData = userSnap.data();\n\n                        // Enforce ban status\n                        if (userData.status === \"banned\") {\n                            await signOut(auth);\n                            setUser(null);\n                            setRole(null);\n                            setLoading(false);\n                            router.push(\"/?banned=true\");\n                            return;\n                        }\n\n                        // RETURNING USER: Trust Firestore Role\n                        setRole(userData.role as UserRole);\n\n                        // Optional: Update last login time\n                        await setDoc(userRef, { lastLogin: serverTimestamp() }, { merge: true });\n\n                    } else {\n                        // NEW USER: Determine Role based on Allowlist\n                        const isAdmin = currentUser.email && ADMIN_EMAILS.includes(currentUser.email);\n                        const initialRole: UserRole = isAdmin ? \"admin\" : \"user\";\n\n                        // Create User Document\n                        await setDoc(userRef, {\n                            uid: currentUser.uid,\n                            email: currentUser.email,\n                            displayName: currentUser.displayName,\n                            photoURL: currentUser.photoURL,\n                            role: initialRole,\n                            createdAt: serverTimestamp(),\n                            lastLogin: serverTimestamp(),\n                        });\n\n                        setRole(initialRole);\n                    }\n                } catch (error) {\n                    console.error(\"Error fetching user role:\", error);\n                    setRole(null); // Fallback to no role on error\n                }\n\n            } else {\n                // User logged out\n                setUser(null);\n                setRole(null);\n            }\n\n            setLoading(false);\n        });\n\n        return () => unsubscribe();\n    }, []);\n\n    const signInWithGoogle = async () => {\n        const provider = new GoogleAuthProvider();\n        try {\n            await signInWithPopup(auth, provider);\n        } catch (error) {\n            console.error(\"Error signing in with Google\", error);\n            throw error;\n        }\n    };\n\n    const signInWithEmail = async (email: string, pass: string) => {\n        try {\n            await signInWithEmailAndPassword(auth, email, pass);\n        } catch (error) {\n            console.error(\"Error signing in with Email\", error);\n            throw error;\n        }\n    }\n\n    const registerWithEmail = async (name: string, email: string, pass: string) => {\n        try {\n            const result = await createUserWithEmailAndPassword(auth, email, pass);\n            await updateProfile(result.user, { displayName: name });\n\n            // Trigger the onAuthStateChanged Logic to save user to Firestore\n            // ...handled automatically by the useEffect hook when it detects the new user\n\n        } catch (error) {\n            console.error(\"Error registering\", error);\n            throw error;\n        }\n    }\n\n\n    const resetPassword = async (email: string) => {\n        try {\n            await sendPasswordResetEmail(auth, email);\n        } catch (error) {\n            console.error(\"Error resetting password\", error);\n            throw error;\n        }\n    }\n\n    const logout = async () => {\n        try {\n            await signOut(auth);\n            setRole(null);\n            setUser(null);\n            router.push(\"/\");\n        } catch (error) {\n            console.error(\"Error signing out\", error);\n        }\n    };\n\n    return (\n        <AuthContext.Provider value={{ user, role, loading, signInWithGoogle, signInWithEmail, registerWithEmail, resetPassword, logout }}>\n            {children}\n        </AuthContext.Provider>\n    );\n}\n\nexport const useAuth = () => useContext(AuthContext);\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 227, "column": 0}, "map": {"version":3,"sources":["file:///F:/JGECHelper/src/components/MaintenanceScreen.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { Wrench, Mail, Clock } from \"lucide-react\";\r\n\r\ninterface MaintenanceScreenProps {\r\n    contactEmail?: string;\r\n    estimatedEndTime?: string | null; // e.g., \"2024-12-31T23:59:00\"\r\n}\r\n\r\nexport default function MaintenanceScreen({ contactEmail = \"admin@jgec.ac.in\", estimatedEndTime }: MaintenanceScreenProps) {\r\n    const [timeLeft, setTimeLeft] = useState<{ days: number; hours: number; minutes: number; seconds: number } | null>(null);\r\n    const [isClient, setIsClient] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setIsClient(true);\r\n        if (!estimatedEndTime) return;\r\n\r\n        const calculateTimeLeft = () => {\r\n            const difference = +new Date(estimatedEndTime) - +new Date();\r\n            if (difference > 0) {\r\n                setTimeLeft({\r\n                    days: Math.floor(difference / (1000 * 60 * 60 * 24)),\r\n                    hours: Math.floor((difference / (1000 * 60 * 60)) % 24),\r\n                    minutes: Math.floor((difference / 1000 / 60) % 60),\r\n                    seconds: Math.floor((difference / 1000) % 60),\r\n                });\r\n            } else {\r\n                setTimeLeft(null);\r\n            }\r\n        };\r\n\r\n        calculateTimeLeft();\r\n        const timer = setInterval(calculateTimeLeft, 1000);\r\n\r\n        return () => clearInterval(timer);\r\n    }, [estimatedEndTime]);\r\n\r\n    return (\r\n        <div className=\"fixed inset-0 z-[100] flex min-h-screen flex-col items-center justify-center bg-zinc-950 p-4 text-zinc-50 overflow-hidden\">\r\n            {/* Background Effects */}\r\n            <div className=\"absolute inset-0 z-0\">\r\n                <div className=\"absolute -left-[10%] -top-[10%] h-[40%] w-[40%] rounded-full bg-primary/20 blur-[120px]\" />\r\n                <div className=\"absolute -bottom-[10%] -right-[10%] h-[40%] w-[40%] rounded-full bg-blue-500/20 blur-[120px]\" />\r\n                <div className=\"absolute inset-0 bg-[linear-gradient(to_right,#80808012_1px,transparent_1px),linear-gradient(to_bottom,#80808012_1px,transparent_1px)] bg-[size:24px_24px]\" />\r\n            </div>\r\n\r\n            <div className=\"relative z-10 flex w-full max-w-2xl flex-col items-center text-center animate-in fade-in slide-in-from-bottom-8 duration-1000\">\r\n                <div className=\"mb-8 flex h-24 w-24 items-center justify-center rounded-3xl bg-zinc-900/50 border border-zinc-800 shadow-2xl backdrop-blur-xl\">\r\n                    <Wrench className=\"h-12 w-12 text-primary animate-pulse\" />\r\n                </div>\r\n\r\n                <h1 className=\"mb-4 text-5xl font-bold tracking-tight sm:text-7xl\">\r\n                    We'll be right back.\r\n                </h1>\r\n\r\n                <p className=\"mb-12 text-lg text-zinc-400 sm:text-xl max-w-xl mx-auto\">\r\n                    JGECHelper is currently undergoing scheduled maintenance to improve your experience. We apologize for the inconvenience.\r\n                </p>\r\n\r\n                {isClient && estimatedEndTime && timeLeft && (\r\n                    <div className=\"mb-12 flex items-center justify-center gap-4 sm:gap-6\">\r\n                        <div className=\"flex flex-col items-center p-4 bg-zinc-900/40 border border-zinc-800 rounded-2xl backdrop-blur-sm min-w-[80px]\">\r\n                            <span className=\"text-3xl font-bold text-white tabular-nums\">{timeLeft.days.toString().padStart(2, '0')}</span>\r\n                            <span className=\"text-xs text-zinc-500 uppercase tracking-widest mt-1\">Days</span>\r\n                        </div>\r\n                        <span className=\"text-2xl font-bold text-zinc-600 animate-pulse\">:</span>\r\n                        <div className=\"flex flex-col items-center p-4 bg-zinc-900/40 border border-zinc-800 rounded-2xl backdrop-blur-sm min-w-[80px]\">\r\n                            <span className=\"text-3xl font-bold text-white tabular-nums\">{timeLeft.hours.toString().padStart(2, '0')}</span>\r\n                            <span className=\"text-xs text-zinc-500 uppercase tracking-widest mt-1\">Hours</span>\r\n                        </div>\r\n                        <span className=\"text-2xl font-bold text-zinc-600 animate-pulse\">:</span>\r\n                        <div className=\"flex flex-col items-center p-4 bg-zinc-900/40 border border-zinc-800 rounded-2xl backdrop-blur-sm min-w-[80px]\">\r\n                            <span className=\"text-3xl font-bold text-white tabular-nums\">{timeLeft.minutes.toString().padStart(2, '0')}</span>\r\n                            <span className=\"text-xs text-zinc-500 uppercase tracking-widest mt-1\">Mins</span>\r\n                        </div>\r\n                        <span className=\"text-2xl font-bold text-zinc-600 animate-pulse\">:</span>\r\n                        <div className=\"flex flex-col items-center p-4 bg-zinc-900/40 border border-zinc-800 rounded-2xl backdrop-blur-sm min-w-[80px]\">\r\n                            <span className=\"text-3xl font-bold text-primary tabular-nums\">{timeLeft.seconds.toString().padStart(2, '0')}</span>\r\n                            <span className=\"text-xs text-zinc-500 uppercase tracking-widest mt-1\">Secs</span>\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                <div className=\"flex flex-col sm:flex-row items-center justify-center gap-4 w-full\">\r\n                    <a\r\n                        href={`mailto:${contactEmail}`}\r\n                        className=\"flex items-center justify-center gap-2 rounded-full bg-white/10 px-8 py-3.5 text-sm font-medium text-white transition-all hover:bg-white/20 hover:scale-105 active:scale-95 border border-white/5\"\r\n                    >\r\n                        <Mail className=\"h-4 w-4\" />\r\n                        Contact Support\r\n                    </a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;;;AAHA;;;AAUe,SAAS,kBAAkB,EAAE,eAAe,kBAAkB,EAAE,gBAAgB,EAA0B;;IACrH,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAA2E;IACnH,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IAEzC,IAAA,0KAAS;uCAAC;YACN,YAAY;YACZ,IAAI,CAAC,kBAAkB;YAEvB,MAAM;iEAAoB;oBACtB,MAAM,aAAa,CAAC,IAAI,KAAK,oBAAoB,CAAC,IAAI;oBACtD,IAAI,aAAa,GAAG;wBAChB,YAAY;4BACR,MAAM,KAAK,KAAK,CAAC,aAAa,CAAC,OAAO,KAAK,KAAK,EAAE;4BAClD,OAAO,KAAK,KAAK,CAAC,AAAC,aAAa,CAAC,OAAO,KAAK,EAAE,IAAK;4BACpD,SAAS,KAAK,KAAK,CAAC,AAAC,aAAa,OAAO,KAAM;4BAC/C,SAAS,KAAK,KAAK,CAAC,AAAC,aAAa,OAAQ;wBAC9C;oBACJ,OAAO;wBACH,YAAY;oBAChB;gBACJ;;YAEA;YACA,MAAM,QAAQ,YAAY,mBAAmB;YAE7C;+CAAO,IAAM,cAAc;;QAC/B;sCAAG;QAAC;KAAiB;IAErB,qBACI,6LAAC;QAAI,WAAU;;0BAEX,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;kCACf,6LAAC;wBAAI,WAAU;;;;;;;;;;;;0BAGnB,6LAAC;gBAAI,WAAU;;kCACX,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC,mNAAM;4BAAC,WAAU;;;;;;;;;;;kCAGtB,6LAAC;wBAAG,WAAU;kCAAqD;;;;;;kCAInE,6LAAC;wBAAE,WAAU;kCAA0D;;;;;;oBAItE,YAAY,oBAAoB,0BAC7B,6LAAC;wBAAI,WAAU;;0CACX,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;kDAA8C,SAAS,IAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;kDACnG,6LAAC;wCAAK,WAAU;kDAAuD;;;;;;;;;;;;0CAE3E,6LAAC;gCAAK,WAAU;0CAAiD;;;;;;0CACjE,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;kDAA8C,SAAS,KAAK,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;kDACpG,6LAAC;wCAAK,WAAU;kDAAuD;;;;;;;;;;;;0CAE3E,6LAAC;gCAAK,WAAU;0CAAiD;;;;;;0CACjE,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;kDAA8C,SAAS,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;kDACtG,6LAAC;wCAAK,WAAU;kDAAuD;;;;;;;;;;;;0CAE3E,6LAAC;gCAAK,WAAU;0CAAiD;;;;;;0CACjE,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;wCAAK,WAAU;kDAAgD,SAAS,OAAO,CAAC,QAAQ,GAAG,QAAQ,CAAC,GAAG;;;;;;kDACxG,6LAAC;wCAAK,WAAU;kDAAuD;;;;;;;;;;;;;;;;;;kCAKnF,6LAAC;wBAAI,WAAU;kCACX,cAAA,6LAAC;4BACG,MAAM,CAAC,OAAO,EAAE,cAAc;4BAC9B,WAAU;;8CAEV,6LAAC,6MAAI;oCAAC,WAAU;;;;;;gCAAY;;;;;;;;;;;;;;;;;;;;;;;;AAOpD;GAtFwB;KAAA"}},
    {"offset": {"line": 520, "column": 0}, "map": {"version":3,"sources":["file:///F:/JGECHelper/src/components/MaintenanceWrapper.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { doc, onSnapshot } from \"firebase/firestore\";\r\nimport { db } from \"@/lib/firebase\";\r\nimport { useAuth } from \"@/context/AuthContext\";\r\nimport MaintenanceScreen from \"./MaintenanceScreen\";\r\n\r\ninterface MaintenanceWrapperProps {\r\n    children: React.ReactNode;\r\n}\r\n\r\nexport default function MaintenanceWrapper({ children }: MaintenanceWrapperProps) {\r\n    const { role } = useAuth();\r\n    const [maintenanceMode, setMaintenanceMode] = useState(false);\r\n    const [contactEmail, setContactEmail] = useState(\"admin@jgec.ac.in\");\r\n    const [estimatedEndTime, setEstimatedEndTime] = useState<string | null>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const docRef = doc(db, \"settings\", \"general\");\r\n\r\n        const unsubscribe = onSnapshot(docRef, (docSnap) => {\r\n            if (docSnap.exists()) {\r\n                const data = docSnap.data();\r\n                setMaintenanceMode(data.maintenanceMode || false);\r\n                setContactEmail(data.contactEmail || \"admin@jgec.ac.in\");\r\n                setEstimatedEndTime(data.maintenanceEndTime || null);\r\n            }\r\n            setLoading(false);\r\n        }, (error) => {\r\n            console.error(\"Error fetching maintenance settings: \", error);\r\n            setLoading(false);\r\n        });\r\n\r\n        return () => unsubscribe();\r\n    }, []);\r\n\r\n    // While checking for maintenance mode initially, don't flash content or maintenance screen\r\n    if (loading) return null;\r\n\r\n    // Admin passes through regardless of maintenance mode\r\n    if (role === \"admin\") {\r\n        return <>{children}</>;\r\n    }\r\n\r\n    if (maintenanceMode) {\r\n        return <MaintenanceScreen contactEmail={contactEmail} estimatedEndTime={estimatedEndTime} />;\r\n    }\r\n\r\n    return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;;;AANA;;;;;;AAYe,SAAS,mBAAmB,EAAE,QAAQ,EAA2B;;IAC5E,MAAM,EAAE,IAAI,EAAE,GAAG,IAAA,4IAAO;IACxB,MAAM,CAAC,iBAAiB,mBAAmB,GAAG,IAAA,yKAAQ,EAAC;IACvD,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,yKAAQ,EAAC;IACjD,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,IAAA,yKAAQ,EAAgB;IACxE,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;wCAAC;YACN,MAAM,SAAS,IAAA,yKAAG,EAAC,+HAAE,EAAE,YAAY;YAEnC,MAAM,cAAc,IAAA,gLAAU,EAAC;4DAAQ,CAAC;oBACpC,IAAI,QAAQ,MAAM,IAAI;wBAClB,MAAM,OAAO,QAAQ,IAAI;wBACzB,mBAAmB,KAAK,eAAe,IAAI;wBAC3C,gBAAgB,KAAK,YAAY,IAAI;wBACrC,oBAAoB,KAAK,kBAAkB,IAAI;oBACnD;oBACA,WAAW;gBACf;;4DAAG,CAAC;oBACA,QAAQ,KAAK,CAAC,yCAAyC;oBACvD,WAAW;gBACf;;YAEA;gDAAO,IAAM;;QACjB;uCAAG,EAAE;IAEL,2FAA2F;IAC3F,IAAI,SAAS,OAAO;IAEpB,sDAAsD;IACtD,IAAI,SAAS,SAAS;QAClB,qBAAO;sBAAG;;IACd;IAEA,IAAI,iBAAiB;QACjB,qBAAO,6LAAC,qJAAiB;YAAC,cAAc;YAAc,kBAAkB;;;;;;IAC5E;IAEA,qBAAO;kBAAG;;AACd;GAvCwB;;QACH,4IAAO;;;KADJ"}},
    {"offset": {"line": 607, "column": 0}, "map": {"version":3,"sources":["file:///F:/JGECHelper/src/components/NetworkMonitor.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useEffect, useState } from \"react\";\r\nimport { WifiOff, Wifi } from \"lucide-react\";\r\n\r\nexport default function NetworkMonitor() {\r\n    const [isOnline, setIsOnline] = useState(true);\r\n    const [showBackOnline, setShowBackOnline] = useState(false);\r\n    const [mounted, setMounted] = useState(false);\r\n\r\n    useEffect(() => {\r\n        setMounted(true);\r\n        setIsOnline(navigator.onLine);\r\n\r\n        const handleOnline = () => {\r\n            setIsOnline(true);\r\n            setShowBackOnline(true);\r\n            setTimeout(() => setShowBackOnline(false), 3000);\r\n        };\r\n\r\n        const handleOffline = () => {\r\n            setIsOnline(false);\r\n            setShowBackOnline(false);\r\n        };\r\n\r\n        window.addEventListener(\"online\", handleOnline);\r\n        window.addEventListener(\"offline\", handleOffline);\r\n\r\n        return () => {\r\n            window.removeEventListener(\"online\", handleOnline);\r\n            window.removeEventListener(\"offline\", handleOffline);\r\n        };\r\n    }, []);\r\n\r\n    if (!mounted) return null;\r\n\r\n    return (\r\n        <>\r\n            {/* Offline Overlay */}\r\n            <div\r\n                className={`fixed inset-0 z-[9999] flex items-center justify-center bg-background/80 backdrop-blur-md transition-opacity duration-300 ${!isOnline ? \"opacity-100 pointer-events-auto\" : \"opacity-0 pointer-events-none\"\r\n                    }`}\r\n            >\r\n                <div\r\n                    className={`flex flex-col items-center justify-center p-8 bg-background text-foreground rounded-2xl shadow-xl border border-zinc-200 dark:border-zinc-800 max-w-sm w-full mx-4 text-center transform transition-transform duration-300 ${!isOnline ? \"scale-100\" : \"scale-95\"\r\n                        }`}\r\n                >\r\n                    <div className=\"w-16 h-16 bg-red-100 dark:bg-red-500/20 rounded-full flex items-center justify-center mb-6\">\r\n                        <WifiOff className=\"w-8 h-8 text-red-600 dark:text-red-500\" />\r\n                    </div>\r\n                    <h2 className=\"text-2xl font-bold mb-2\">No Internet Connection</h2>\r\n                    <p className=\"text-zinc-500 dark:text-zinc-400\">\r\n                        Please check your network settings and reconnect to continue using the app.\r\n                    </p>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Back Online Toast */}\r\n            <div\r\n                className={`fixed top-0 left-0 right-0 z-[10000] flex justify-center transition-transform duration-500 ease-in-out ${showBackOnline ? \"translate-y-0\" : \"-translate-y-full\"\r\n                    }`}\r\n            >\r\n                <div className=\"bg-emerald-500 text-white px-6 py-2 rounded-b-xl shadow-lg flex items-center gap-2 font-medium\">\r\n                    <Wifi className=\"w-4 h-4\" />\r\n                    Back Online\r\n                </div>\r\n            </div>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;;;AAHA;;;AAKe,SAAS;;IACpB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAC;IACzC,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC;IACrD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;oCAAC;YACN,WAAW;YACX,YAAY,UAAU,MAAM;YAE5B,MAAM;yDAAe;oBACjB,YAAY;oBACZ,kBAAkB;oBAClB;iEAAW,IAAM,kBAAkB;gEAAQ;gBAC/C;;YAEA,MAAM;0DAAgB;oBAClB,YAAY;oBACZ,kBAAkB;gBACtB;;YAEA,OAAO,gBAAgB,CAAC,UAAU;YAClC,OAAO,gBAAgB,CAAC,WAAW;YAEnC;4CAAO;oBACH,OAAO,mBAAmB,CAAC,UAAU;oBACrC,OAAO,mBAAmB,CAAC,WAAW;gBAC1C;;QACJ;mCAAG,EAAE;IAEL,IAAI,CAAC,SAAS,OAAO;IAErB,qBACI;;0BAEI,6LAAC;gBACG,WAAW,CAAC,0HAA0H,EAAE,CAAC,WAAW,oCAAoC,iCAClL;0BAEN,cAAA,6LAAC;oBACG,WAAW,CAAC,2NAA2N,EAAE,CAAC,WAAW,cAAc,YAC7P;;sCAEN,6LAAC;4BAAI,WAAU;sCACX,cAAA,6LAAC,0NAAO;gCAAC,WAAU;;;;;;;;;;;sCAEvB,6LAAC;4BAAG,WAAU;sCAA0B;;;;;;sCACxC,6LAAC;4BAAE,WAAU;sCAAmC;;;;;;;;;;;;;;;;;0BAOxD,6LAAC;gBACG,WAAW,CAAC,uGAAuG,EAAE,iBAAiB,kBAAkB,qBAClJ;0BAEN,cAAA,6LAAC;oBAAI,WAAU;;sCACX,6LAAC,6MAAI;4BAAC,WAAU;;;;;;wBAAY;;;;;;;;;;;;;;AAMhD;GAhEwB;KAAA"}}]
}