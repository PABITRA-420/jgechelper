(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,18566,(e,r,t)=>{r.exports=e.r(76562)},32341,e=>{"use strict";var r=e.i(43476),t=e.i(71645);e.i(51718);var a=e.i(18357),i=e.i(59141);e.i(36180);var o=e.i(98925),s=e.i(18566);let l=["sarkarpabitra1510@gmail.com"],n=(0,t.createContext)({});function u({children:e}){let[u,c]=(0,t.useState)(null),[h,d]=(0,t.useState)(null),[g,m]=(0,t.useState)(!0),p=(0,s.useRouter)();(0,t.useEffect)(()=>{let e=(0,a.onAuthStateChanged)(i.auth,async e=>{if(m(!0),e){c(e);try{let r=(0,o.doc)(i.db,"users",e.uid),t=await (0,o.getDoc)(r);if(t.exists()){let e=t.data();d(e.role),await (0,o.setDoc)(r,{lastLogin:(0,o.serverTimestamp)()},{merge:!0})}else{let t=e.email&&l.includes(e.email)?"admin":"user";await (0,o.setDoc)(r,{uid:e.uid,email:e.email,displayName:e.displayName,photoURL:e.photoURL,role:t,createdAt:(0,o.serverTimestamp)(),lastLogin:(0,o.serverTimestamp)()}),d(t)}}catch(e){console.error("Error fetching user role:",e),d(null)}}else c(null),d(null);m(!1)});return()=>e()},[]);let w=async()=>{let e=new a.GoogleAuthProvider;try{await (0,a.signInWithPopup)(i.auth,e)}catch(e){throw console.error("Error signing in with Google",e),e}},y=async(e,r)=>{try{await (0,a.signInWithEmailAndPassword)(i.auth,e,r)}catch(e){throw console.error("Error signing in with Email",e),e}},v=async(e,r,t)=>{try{let o=await (0,a.createUserWithEmailAndPassword)(i.auth,r,t);await (0,a.updateProfile)(o.user,{displayName:e})}catch(e){throw console.error("Error registering",e),e}},A=async()=>{try{await (0,a.signOut)(i.auth),d(null),c(null),p.push("/")}catch(e){console.error("Error signing out",e)}};return(0,r.jsx)(n.Provider,{value:{user:u,role:h,loading:g,signInWithGoogle:w,signInWithEmail:y,registerWithEmail:v,logout:A},children:e})}e.s(["AuthProvider",()=>u,"useAuth",0,()=>(0,t.useContext)(n)])}]);